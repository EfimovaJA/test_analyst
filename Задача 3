На картинке (скачать можно по ссылке - https://drive.google.com/file/d/1fi9JLRvO6bhS1uJJ2PUX8ZTOq0Eq_At0/view?usp=drive_link) изображен интерфейс регистрации Пользователя (как успешный экран создания Пользователя, так и варианты с ошибками).
  
 Задание 3.1:
 Требуется описать REST api интерфейс на стороне бэк сервиса, который должен вызываться фронтендом при нажатии на кнопку “Register”. Описание должно включать:
http метод + URL
входные параметры (наименование, тип, обязательность, ограничения)
выходные параметры при успешном ответе (наименование, тип, обязательность, ограничения)
выходные параметры при ответе с ошибкой  (наименование, тип, обязательность, ограничения)
описание ошибок - коды ответов (главное верно указать клиентские или серверные) + текст сообщения
пример запроса
пример ответа (для успешного сценария и сценария с ошибкой).
Требований к формату нет (может быть в виде таблицы или просто текстом).
Допускается описание в формате openAPI спецификации. Полученный yaml  приложить в виде текста к решению или в виде отдельного файла (обязательно не забыть открыть доступ).
Задание 3.2
Описать подробный пошаговый алгоритм, создания Пользователя на стороне бэк сервиса при вызове, получившегося в Задачи 3.1 метода. Алгоритм должен подробно описывать какие проверки требуется выполнять  бэк сервису после получения запроса на создание нового Пользователя (при нажатии кнопки “Register”),  прежде чем создать Пользователя в БД. Описание может быть в виде текста или диаграммы (например, activity)/блок-схемы.

Задача 3.1
HTTP Метод и URL: POST /api/v1/auth/register
Входные параметры (Request Body - JSON): 
Наименование: First name	Тип: string 	Обязательность:Да	Ограничения: от 2 до 50 символов
Наименование: Last name	Тип: string	Обязательность:Да	Ограничения: от 2 до 50 символов
Наименование: Username	Тип: string	Обязательность:Да	Ограничения: формат, уникальный в БД
Наименование: Password	Тип:string	Обязательность:Да Ограничения: Мин. 8 символов, хотя бы 1 цифра, 1 спецсимвол и заглавная буква
Наименование: captcha_token	Тип:string	Обязательность:Да	Ограничения: Токен, полученный от виджета Google reCAPTCHA

Выходные параметры (Успех - 201 Created)
id: integer (ID нового пользователя)
status: string ("success")

Коды ответов и описание ошибок
400 Bad Request: Невалидные данные (короткое имя, слабый пароль).
401 Unauthorized: Ошибка проверки reCAPTCHA (бот или просроченный токен).
409 Conflict: username уже занят в базе данных.

Пример запроса
JSON
{
  "first_name": "Ivan",
  "last_name": "Ivanov",
  "username": "ivan_pro",
  "password": "SafePassword123!",
  "captcha_token": "03AGdBq27..."
}

Успешный ответ:
JSON
{
  "id": 125,
  "message": "User register successful"
}

400 Bad Request: Невалидные данные (слабый пароль):
JSON
{
  "status": "error",
  "code": "password_erorr",
  "message": "Passwords must have at least one non alphanumeric character, one digit ('0'-'9'), one uppercase ('A'-'Z'), one lowercase ('a'-'z'), one special character and Password must be
eight characters or longer."
}

Oшибка уникальности Username (409 Conflict)
JSON
{
  "status": "error",
  "code": "USERNAME_TAKEN",
  "message": "The username you entered is already in use. Please choose another one."
}

Ответ reCaptcha (401 Unauthorized или 400 Bad Request):
JSON
{
  "status": "error",
  "code": "CAPTCHA_VERIFICATION_FAILED",
  "message": "Please verify reCaptcha to register!!"
}

Задание 3.2: Алгоритм создания пользователя (Back-end)
1. Прием и первичная валидация структуры (Syntax Check)
Сразу после получения `POST`-запроса сервер проверяет:
Присутствие всех полей:`first_name`, `last_name`, `username`, `password`, `captcha_token`.
Типы данных: Все значения должны быть строками.
Пустые значения: Поля не должны содержать только пробелы.
Если ошибка: Возврат 400 Bad Request с описанием пропущенных полей.
2. Проверка reCAPTCHA (Bot Protection)
Бэкенд отправляет `captcha_token` на сервер верификации Google.
Если ответ отрицательный: Возврат 400 Bad Request с текстом `"Please verify reCaptcha to register"`.
3. Глубокая валидация данных (Field Validation)
Сервис проверяет данные на соответствие бизнес-правилам:
Длина имен:`first_name` и `last_name` в диапазоне 2–50 символов.
Сложность пароля: Проверка через регулярное выражение на наличие: минимум 8 символов, минимум одной цифры, минимум одной заглавной и одной строчной буквы, минимум одного спецсимвола.
Если ошибка: Возврат 400 Bad Request с детальным списком нарушенных требований.
4. Проверка уникальности (Database Consistency)
Сервис выполняет запрос к БД для проверки доступности `username`:
Выполняется поиск: `SELECT id FROM users WHERE username = ? LIMIT 1`.
Если пользователь найден: Возврат 409 Conflict с сообщением, что имя занято.
5. Подготовка данных и безопасность (Security)
Перед записью данные должны быть обработаны:
Хеширование: Пароль преобразуется в хеш (используется соль и алгоритм, например, BCrypt). Хранение пароля в открытом виде запрещено.
Очистка (Sanitization): Удаление лишних пробелов по краям имен, приведение `username` к нижнему регистру.
6. Сохранение в БД (Persistence)
Выполняется операция записи в рамках транзакции:
1. Создается запись в таблице `accounts` (или `users`).
2. Если создание успешно — транзакция завершается (Commit).
3. Если на этапе записи произошел технический сбой (например, потеря связи с БД) — транзакция откатывается.
При ошибке БД:Возврат 500 Internal Server Error.
7. Формирование ответа
После успешного завершения всех этапов сервис формирует ответ 201 Created, содержащий ID созданного пользователя.
